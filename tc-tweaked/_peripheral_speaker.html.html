<!doctype HTML> <html><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>speaker</title><meta property="og:title" content="speaker"/><meta property="og:type" content="website"/><meta name="description" content="The speaker peripheral allows your computer to play notes and other sounds."/><meta property="og:description" content="The speaker peripheral allows your computer to play notes and other sounds."/><meta property="og:image" content="https://tweaked.cc/pack-26318f36.png"/><meta property="og:site_name" content="CC: Tweaked"/><meta name="illuaminate:index" content="../index.json"/><link rel="stylesheet" href="../main.css?v=bbe7ccb7" type="text/css"/>

<meta name="theme-color" content="#c8d87c"/></head><body><nav id="nav"><button id="nav-reveal" type="button">â˜°</button><h1><a href=".././"><img src="../pack-26318f36.png" alt="CC: Tweaked"/></a></h1><div class="nav-links"><h2 tabindex="0">Contents</h2><ul><li><a href="#v:playNote" class="sidebar-link">playNote</a></li><li><a href="#v:playSound" class="sidebar-link">playSound</a></li><li><a href="#v:playAudio" class="sidebar-link">playAudio</a></li><li><a href="#v:stop" class="sidebar-link">stop</a></li></ul><h2 class="collapsed" tabindex="0">Globals</h2><ul><li><a href="../module/_G.html" class="sidebar-link">_G</a></li><li><a href="../module/colors.html" class="sidebar-link">colors</a></li><li><a href="../module/colours.html" class="sidebar-link">colours</a></li><li><a href="../module/commands.html" class="sidebar-link">commands</a></li><li><a href="../module/disk.html" class="sidebar-link">disk</a></li><li><a href="../module/fs.html" class="sidebar-link">fs</a></li><li><a href="../module/gps.html" class="sidebar-link">gps</a></li><li><a href="../module/help.html" class="sidebar-link">help</a></li><li><a href="../module/http.html" class="sidebar-link">http</a></li><li><a href="../module/io.html" class="sidebar-link">io</a></li><li><a href="../module/keys.html" class="sidebar-link">keys</a></li><li><a href="../module/multishell.html" class="sidebar-link">multishell</a></li><li><a href="../module/os.html" class="sidebar-link">os</a></li><li><a href="../module/paintutils.html" class="sidebar-link">paintutils</a></li><li><a href="../module/parallel.html" class="sidebar-link">parallel</a></li><li><a href="../module/peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="../module/pocket.html" class="sidebar-link">pocket</a></li><li><a href="../module/rednet.html" class="sidebar-link">rednet</a></li><li><a href="../module/redstone.html" class="sidebar-link">redstone</a></li><li><a href="../module/settings.html" class="sidebar-link">settings</a></li><li><a href="../module/shell.html" class="sidebar-link">shell</a></li><li><a href="../module/term.html" class="sidebar-link">term</a></li><li><a href="../module/textutils.html" class="sidebar-link">textutils</a></li><li><a href="../module/turtle.html" class="sidebar-link">turtle</a></li><li><a href="../module/vector.html" class="sidebar-link">vector</a></li><li><a href="../module/window.html" class="sidebar-link">window</a></li></ul><h2 class="collapsed" tabindex="0">Modules</h2><ul><li><a href="../library/cc.audio.dfpwm.html" class="sidebar-link">cc.audio.dfpwm</a></li><li><a href="../library/cc.completion.html" class="sidebar-link">cc.completion</a></li><li><a href="../library/cc.expect.html" class="sidebar-link">cc.expect</a></li><li><a href="../library/cc.image.nft.html" class="sidebar-link">cc.image.nft</a></li><li><a href="../library/cc.pretty.html" class="sidebar-link">cc.pretty</a></li><li><a href="../library/cc.require.html" class="sidebar-link">cc.require</a></li><li><a href="../library/cc.shell.completion.html" class="sidebar-link">cc.shell.completion</a></li><li><a href="../library/cc.strings.html" class="sidebar-link">cc.strings</a></li></ul><h2 tabindex="0">Peripherals</h2><ul><li><a href="command.html" class="sidebar-link">command</a></li><li><a href="computer.html" class="sidebar-link">computer</a></li><li><a href="drive.html" class="sidebar-link">drive</a></li><li><a href="modem.html" class="sidebar-link">modem</a></li><li><a href="monitor.html" class="sidebar-link">monitor</a></li><li><a href="printer.html" class="sidebar-link">printer</a></li><li><strong class="sidebar-link selected">speaker</strong></li></ul><h2 class="collapsed" tabindex="0">Generic Peripherals</h2><ul><li><a href="../generic_peripheral/energy_storage.html" class="sidebar-link">energy_storage</a></li><li><a href="../generic_peripheral/fluid_storage.html" class="sidebar-link">fluid_storage</a></li><li><a href="../generic_peripheral/inventory.html" class="sidebar-link">inventory</a></li></ul><h2 class="collapsed" tabindex="0">Events</h2><ul><li><a href="../event/alarm.html" class="sidebar-link">alarm</a></li><li><a href="../event/char.html" class="sidebar-link">char</a></li><li><a href="../event/computer_command.html" class="sidebar-link">computer_command</a></li><li><a href="../event/disk.html" class="sidebar-link">disk</a></li><li><a href="../event/disk_eject.html" class="sidebar-link">disk_eject</a></li><li><a href="../event/file_transfer.html" class="sidebar-link">file_transfer</a></li><li><a href="../event/http_check.html" class="sidebar-link">http_check</a></li><li><a href="../event/http_failure.html" class="sidebar-link">http_failure</a></li><li><a href="../event/http_success.html" class="sidebar-link">http_success</a></li><li><a href="../event/key.html" class="sidebar-link">key</a></li><li><a href="../event/key_up.html" class="sidebar-link">key_up</a></li><li><a href="../event/modem_message.html" class="sidebar-link">modem_message</a></li><li><a href="../event/monitor_resize.html" class="sidebar-link">monitor_resize</a></li><li><a href="../event/monitor_touch.html" class="sidebar-link">monitor_touch</a></li><li><a href="../event/mouse_click.html" class="sidebar-link">mouse_click</a></li><li><a href="../event/mouse_drag.html" class="sidebar-link">mouse_drag</a></li><li><a href="../event/mouse_scroll.html" class="sidebar-link">mouse_scroll</a></li><li><a href="../event/mouse_up.html" class="sidebar-link">mouse_up</a></li><li><a href="../event/paste.html" class="sidebar-link">paste</a></li><li><a href="../event/peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="../event/peripheral_detach.html" class="sidebar-link">peripheral_detach</a></li><li><a href="../event/rednet_message.html" class="sidebar-link">rednet_message</a></li><li><a href="../event/redstone.html" class="sidebar-link">redstone</a></li><li><a href="../event/speaker_audio_empty.html" class="sidebar-link">speaker_audio_empty</a></li><li><a href="../event/task_complete.html" class="sidebar-link">task_complete</a></li><li><a href="../event/term_resize.html" class="sidebar-link">term_resize</a></li><li><a href="../event/terminate.html" class="sidebar-link">terminate</a></li><li><a href="../event/timer.html" class="sidebar-link">timer</a></li><li><a href="../event/turtle_inventory.html" class="sidebar-link">turtle_inventory</a></li><li><a href="../event/websocket_closed.html" class="sidebar-link">websocket_closed</a></li><li><a href="../event/websocket_failure.html" class="sidebar-link">websocket_failure</a></li><li><a href="../event/websocket_message.html" class="sidebar-link">websocket_message</a></li><li><a href="../event/websocket_success.html" class="sidebar-link">websocket_success</a></li></ul><h2 class="collapsed" tabindex="0">Guides</h2><ul><li><a href="../guide/gps_setup.html" class="sidebar-link">Setting up GPS</a></li><li><a href="../guide/local_ips.html" class="sidebar-link">Allowing access to local IPs</a></li><li><a href="../guide/speaker_audio.html" class="sidebar-link">Playing audio with speakers</a></li><li><a href="../guide/using_require.html" class="sidebar-link">Reusing code with require</a></li></ul><h2 class="collapsed" tabindex="0">Reference</h2><ul><li><a href="../reference/breaking_changes.html" class="sidebar-link">Incompatibilities between versions</a></li><li><a href="../reference/computercraft_command.html" class="sidebar-link">The /computercraft command</a></li><li><a href="../reference/feature_compat.html" class="sidebar-link">Lua 5.2/5.3 features in CC: Tweaked</a></li></ul></div></nav><div id="main"><div id="search-form" role="form"><input id="search-box" type="text" placeholder="Search..." autocomplete="off" tabindex="0"/><div id="search-results"></div></div><section id="content"><h1>speaker</h1><p>The speaker peripheral allows your computer to play notes and other sounds.</p>
<p>The speaker can play three kinds of sound, in increasing orders of complexity:</p>
<ul>
<li><a href="speaker.html#v:playNote" class="reference"><code>playNote</code></a> allows you to play noteblock note.</li>
<li><a href="speaker.html#v:playSound" class="reference"><code>playSound</code></a> plays any built-in Minecraft sound, such as block sounds or mob noises.</li>
<li><a href="speaker.html#v:playAudio" class="reference"><code>playAudio</code></a> can play arbitrary audio.</li>
</ul>
<h2>Recipe</h2>
<div class="recipe-container">    <div class="recipe"><strong class="recipe-title">Speaker</strong><div class="recipe-inputs"><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/note_block.png" alt="Note Block" title="Note Block" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/redstone.png" alt="Redstone Dust" title="Redstone Dust" class="recipe-icon"/></div><div class="recipe-item recipe-input"><img src="/images/items/minecraft/stone.png" alt="Stone" title="Stone" class="recipe-icon"/></div></div><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45.513 45.512" class="recipe-arrow"><g><path d="M44.275,19.739L30.211,5.675c-0.909-0.909-2.275-1.18-3.463-0.687c-1.188,0.493-1.959,1.654-1.956,2.938l0.015,5.903
   l-21.64,0.054C1.414,13.887-0.004,15.312,0,17.065l0.028,11.522c0.002,0.842,0.338,1.648,0.935,2.242s1.405,0.927,2.247,0.925
   l21.64-0.054l0.014,5.899c0.004,1.286,0.781,2.442,1.971,2.931c1.189,0.487,2.557,0.21,3.46-0.703L44.29,25.694
   C45.926,24.043,45.92,21.381,44.275,19.739z" fill="var(--recipe-hover)"></path></g></svg><div class="recipe-item recipe-output"><img src="/images/items/computercraft/speaker.png" alt="Speaker" title="Speaker" class="recipe-icon"/></div></div></div><h3>Changes</h3><ul><li><strong>New in version 1.80pr1</strong> </li></ul><table class="definition-list"><tbody><tr><th class="definition-name"><a href="#v:playNote">playNote(instrument [, volume [, pitch]])</a></th><td>Plays a note block note through the speaker.</td></tr><tr><th class="definition-name"><a href="#v:playSound">playSound(name [, volume [, pitch]])</a></th><td>Plays a Minecraft sound through the speaker.</td></tr><tr><th class="definition-name"><a href="#v:playAudio">playAudio(audio [, volume])</a></th><td>Attempt to stream some audio data to the speaker.</td></tr><tr><th class="definition-name"><a href="#v:stop">stop()</a></th><td>Stop all audio being played by this speaker.</td></tr></tbody></table><dl class="definition"><dt><a name="v:playNote" href="#v:playNote"></a><span class="definition-name">playNote(instrument [, volume [, pitch]])</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/common/src/main/java/dan200/computercraft/shared/peripheral/speaker/SpeakerPeripheral.java#L207" class="source-link">Source</a></dt><dd><p>Plays a note block note through the speaker.</p>
<p>This takes the name of a note to play, as well as optionally the volume
and pitch to play the note at.</p>
<p>The pitch argument uses semitones as the unit. This directly maps to the
number of clicks on a note block. For reference, 0, 12, and 24 map to F#,
and 6 and 18 map to C.</p>
<p>A maximum of 8 notes can be played in a single tick. If this limit is hit, this function will return
<span class="reference reference-unresolved"><code>false</code></span>.</p>
<h3>Valid instruments</h3>
<p>The speaker supports <a href="https://minecraft.wiki/w/Note_Block#Instruments">all of Minecraft's noteblock instruments</a>.
These are:</p>
<p><code>&quot;harp&quot;</code>, <code>&quot;basedrum&quot;</code>, <code>&quot;snare&quot;</code>, <code>&quot;hat&quot;</code>, <code>&quot;bass&quot;</code>, <code>&quot;flute&quot;</code>,
<code>&quot;bell&quot;</code>, <code>&quot;guitar&quot;</code>, <code>&quot;chime&quot;</code>, <code>&quot;xylophone&quot;</code>, <code>&quot;iron_xylophone&quot;</code>,
<code>&quot;cow_bell&quot;</code>, <code>&quot;didgeridoo&quot;</code>, <code>&quot;bit&quot;</code>, <code>&quot;banjo&quot;</code> and <code>&quot;pling&quot;</code>.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">instrument</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The instrument to use to play this note.</li><li><span class="parameter">volume<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The volume to play the note at, from 0.0 to 3.0. Defaults to 1.0.</li><li><span class="parameter">pitch<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The pitch to play the note at in semitones, from 0 to 24. Defaults to 12.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> Whether the note could be played as the limit was reached.</li></ol><h3>Throws</h3><ul><li><p>If the instrument doesn't exist.</p>
</li></ul></dd><dt><a name="v:playSound" href="#v:playSound"></a><span class="definition-name">playSound(name [, volume [, pitch]])</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/common/src/main/java/dan200/computercraft/shared/peripheral/speaker/SpeakerPeripheral.java#L252" class="source-link">Source</a></dt><dd><p>Plays a Minecraft sound through the speaker.</p>
<p>This takes the <a href="https://minecraft.wiki/w/Sounds.json">name of a Minecraft sound</a>, such as
<code>&quot;minecraft:block.note_block.harp&quot;</code>, as well as an optional volume and pitch.</p>
<p>Only one sound can be played at once. This function will return <span class="reference reference-unresolved"><code>false</code></span> if another sound was started
this tick, or if some <a href="speaker.html#v:playAudio" class="reference">audio</a> is still playing.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">name</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The name of the sound to play.</li><li><span class="parameter">volume<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The volume to play the sound at, from 0.0 to 3.0. Defaults to 1.0.</li><li><span class="parameter">pitch<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The speed to play the sound at, from 0.5 to 2.0. Defaults to 1.0.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> Whether the sound could be played.</li></ol><h3>Throws</h3><ul><li><p>If the sound name was invalid.</p>
</li></ul><h3>Usage</h3><ul><li><p>Play a creeper hiss with the speaker.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt" data-peripheral="speaker"><span class="keyword">local</span> <span class="ident">speaker</span> <span class="symbol">=</span> <a title="Find all peripherals of a specific type, and return the wrapped peripherals." href="../module/peripheral.html#v:find"><span class="ident">peripheral</span><span class="symbol">.</span><span class="symbol">find</span></a><span class="symbol">(</span><span class="string">&quot;speaker&quot;</span><span class="symbol">)</span>
<span class="ident">speaker</span><span class="symbol">.</span><span class="symbol">playSound</span><span class="symbol">(</span><span class="string">&quot;entity.creeper.primed&quot;</span><span class="symbol">)</span><span class="symbol"></span></pre></div></li></ul></dd><dt><a name="v:playAudio" href="#v:playAudio"></a><span class="definition-name">playAudio(audio [, volume])</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/common/src/main/java/dan200/computercraft/shared/peripheral/speaker/SpeakerPeripheral.java#L315" class="source-link">Source</a></dt><dd><p>Attempt to stream some audio data to the speaker.</p>
<p>This accepts a list of audio samples as amplitudes between -128 and 127. These are stored in an internal buffer
and played back at 48kHz. If this buffer is full, this function will return <span class="reference reference-unresolved"><code>false</code></span>. You should wait for
a <a href="../event/speaker_audio_empty.html" class="reference"><code>speaker_audio_empty</code></a> event before trying again.</p>
<div class="admonition admonition-note"><h5 class="admonition-heading"><span aria-hidden="true">ðŸ›ˆ</span> note</h5><p>The speaker only buffers a single call to <a href="speaker.html#v:playAudio" class="reference"><code>playAudio</code></a> at once. This means if you try to play a small
number of samples, you'll have a lot of stutter. You should try to play as many samples in one call as possible
(up to 128Ã—1024), as this reduces the chances of audio stuttering or halting, especially when the server or
computer is lagging.</p>
</div><p><a href="../guide/speaker_audio.html" class="reference">Playing audio with speakers</a> provides a more complete guide to using speakers</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">audio</span> <span class="type">{ <span class="reference reference-unresolved"><code>number</code></span>... }</span> A list of amplitudes.</li><li><span class="parameter">volume<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The volume to play this audio at. If not given, defaults to the previous volume
given to <a href="speaker.html#v:playAudio" class="reference"><code>playAudio</code></a>.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> If there was room to accept this audio data.</li></ol><h3>Throws</h3><ul><li><p>If the audio data is malformed.</p>
</li></ul><h3>Usage</h3><ul><li><p>Read an audio file, decode it using <a href="../library/cc.audio.dfpwm.html" class="reference"><code>cc.audio.dfpwm</code></a>, and play it using the speaker.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt" data-peripheral="speaker"><span class="keyword">local</span> <a title="Convert between streams of DFPWM audio data and a list of amplitudes." href="../library/cc.audio.dfpwm.html"><span class="ident">dfpwm</span> </a><span class="symbol">=</span> <span class="ident">require</span><span class="symbol">(</span><span class="string">&quot;cc.audio.dfpwm&quot;</span><span class="symbol">)</span>
<span class="keyword">local</span> <span class="ident">speaker</span> <span class="symbol">=</span> <a title="Find all peripherals of a specific type, and return the wrapped peripherals." href="../module/peripheral.html#v:find"><span class="ident">peripheral</span><span class="symbol">.</span><span class="symbol">find</span></a><span class="symbol">(</span><span class="string">&quot;speaker&quot;</span><span class="symbol">)</span>

<span class="keyword">local</span> <span class="ident">decoder</span> <span class="symbol">=</span> <a title="Create a new decoder for converting DFPWM into PCM audio data." href="../library/cc.audio.dfpwm.html#v:make_decoder"><span class="ident">dfpwm</span><span class="symbol">.</span><span class="symbol">make_decoder</span></a><span class="symbol">(</span><span class="symbol">)</span>
<span class="keyword">for</span> <span class="ident">chunk</span> <span class="keyword">in</span> <a title="Opens the given file name in read mode and returns an iterator that, each time it is called, returns a new line from the file." href="../module/io.html#v:lines"><span class="ident">io</span><span class="symbol">.</span><span class="symbol">lines</span></a><span class="symbol">(</span><span class="string">&quot;data/example.dfpwm&quot;</span><span class="symbol">,</span> <span class="number">16</span> <span class="symbol">*</span> <span class="number">1024</span><span class="symbol">)</span> <span class="keyword">do</span>
    <span class="keyword">local</span> <span class="ident">buffer</span> <span class="symbol">=</span> <span class="ident">decoder</span><span class="symbol">(</span><span class="ident">chunk</span><span class="symbol">)</span>

    <span class="keyword">while</span> <span class="operator-kw">not</span> <span class="ident">speaker</span><span class="symbol">.</span><span class="symbol">playAudio</span><span class="symbol">(</span><span class="ident">buffer</span><span class="symbol">)</span> <span class="keyword">do</span>
<a title="Pause execution of the current thread and waits for any events matching filter." href="../module/os.html#v:pullEvent">        <span class="ident">os</span><span class="symbol">.</span><span class="symbol">pullEvent</span></a><span class="symbol">(</span><span class="string">&quot;speaker_audio_empty&quot;</span><span class="symbol">)</span>
    <span class="keyword">end</span>
<span class="keyword">end</span><span class="symbol"></span></pre></div></li></ul><h3>See also</h3><ul><li><strong><a href="../library/cc.audio.dfpwm.html" class="reference"><code>cc.audio.dfpwm</code></a></strong> Provides utilities for decoding DFPWM audio files into a format which can be played by
the speaker.</li><li><strong><a href="../guide/speaker_audio.html" class="reference"><code>Playing audio with speakers</code></a></strong> For a more complete introduction to the <a href="speaker.html#v:playAudio" class="reference"><code>playAudio</code></a> function.</li></ul><h3>Changes</h3><ul><li><strong>New in version 1.100</strong> </li></ul></dd><dt><a name="v:stop" href="#v:stop"></a><span class="definition-name">stop()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/common/src/main/java/dan200/computercraft/shared/peripheral/speaker/SpeakerPeripheral.java#L342" class="source-link">Source</a></dt><dd><p>Stop all audio being played by this speaker.</p>
<p>This clears any audio that <a href="speaker.html#v:playAudio" class="reference"><code>playAudio</code></a> had queued and stops the latest sound played by <a href="speaker.html#v:playSound" class="reference"><code>playSound</code></a>.</p>
<h3>Changes</h3><ul><li><strong>New in version 1.100</strong> </li></ul></dd></dl></section><footer>Last updated on 2024-05-26</footer></div><div id="search-overlay"></div><script src="../main.js?v=f7e54cef" type="text/javascript" defer></script></body></html>