<!doctype HTML> <html><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>file_transfer</title><meta property="og:title" content="file_transfer"/><meta property="og:type" content="website"/><meta name="description" content="The file_transfer event is queued when a user drags-and-drops a file on an open computer."/><meta property="og:description" content="The file_transfer event is queued when a user drags-and-drops a file on an open computer."/><meta property="og:image" content="https://tweaked.cc/pack-26318f36.png"/><meta property="og:site_name" content="CC: Tweaked"/><meta name="illuaminate:index" content="../index.json"/><link rel="stylesheet" href="../main.css?v=bbe7ccb7" type="text/css"/>

<meta name="theme-color" content="#c8d87c"/></head><body><nav id="nav"><button id="nav-reveal" type="button">â˜°</button><h1><a href=".././"><img src="../pack-26318f36.png" alt="CC: Tweaked"/></a></h1><div class="nav-links"><h2 tabindex="0">Types</h2><ul><li><a href="#ty:TransferredFiles" class="sidebar-link">TransferredFiles</a></li><li><a href="#ty:TransferredFile" class="sidebar-link">TransferredFile</a></li></ul><h2 class="collapsed" tabindex="0">Globals</h2><ul><li><a href="../module/_G.html" class="sidebar-link">_G</a></li><li><a href="../module/colors.html" class="sidebar-link">colors</a></li><li><a href="../module/colours.html" class="sidebar-link">colours</a></li><li><a href="../module/commands.html" class="sidebar-link">commands</a></li><li><a href="../module/disk.html" class="sidebar-link">disk</a></li><li><a href="../module/fs.html" class="sidebar-link">fs</a></li><li><a href="../module/gps.html" class="sidebar-link">gps</a></li><li><a href="../module/help.html" class="sidebar-link">help</a></li><li><a href="../module/http.html" class="sidebar-link">http</a></li><li><a href="../module/io.html" class="sidebar-link">io</a></li><li><a href="../module/keys.html" class="sidebar-link">keys</a></li><li><a href="../module/multishell.html" class="sidebar-link">multishell</a></li><li><a href="../module/os.html" class="sidebar-link">os</a></li><li><a href="../module/paintutils.html" class="sidebar-link">paintutils</a></li><li><a href="../module/parallel.html" class="sidebar-link">parallel</a></li><li><a href="../module/peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="../module/pocket.html" class="sidebar-link">pocket</a></li><li><a href="../module/rednet.html" class="sidebar-link">rednet</a></li><li><a href="../module/redstone.html" class="sidebar-link">redstone</a></li><li><a href="../module/settings.html" class="sidebar-link">settings</a></li><li><a href="../module/shell.html" class="sidebar-link">shell</a></li><li><a href="../module/term.html" class="sidebar-link">term</a></li><li><a href="../module/textutils.html" class="sidebar-link">textutils</a></li><li><a href="../module/turtle.html" class="sidebar-link">turtle</a></li><li><a href="../module/vector.html" class="sidebar-link">vector</a></li><li><a href="../module/window.html" class="sidebar-link">window</a></li></ul><h2 class="collapsed" tabindex="0">Modules</h2><ul><li><a href="../library/cc.audio.dfpwm.html" class="sidebar-link">cc.audio.dfpwm</a></li><li><a href="../library/cc.completion.html" class="sidebar-link">cc.completion</a></li><li><a href="../library/cc.expect.html" class="sidebar-link">cc.expect</a></li><li><a href="../library/cc.image.nft.html" class="sidebar-link">cc.image.nft</a></li><li><a href="../library/cc.pretty.html" class="sidebar-link">cc.pretty</a></li><li><a href="../library/cc.require.html" class="sidebar-link">cc.require</a></li><li><a href="../library/cc.shell.completion.html" class="sidebar-link">cc.shell.completion</a></li><li><a href="../library/cc.strings.html" class="sidebar-link">cc.strings</a></li></ul><h2 class="collapsed" tabindex="0">Peripherals</h2><ul><li><a href="../peripheral/command.html" class="sidebar-link">command</a></li><li><a href="../peripheral/computer.html" class="sidebar-link">computer</a></li><li><a href="../peripheral/drive.html" class="sidebar-link">drive</a></li><li><a href="../peripheral/modem.html" class="sidebar-link">modem</a></li><li><a href="../peripheral/monitor.html" class="sidebar-link">monitor</a></li><li><a href="../peripheral/printer.html" class="sidebar-link">printer</a></li><li><a href="../peripheral/speaker.html" class="sidebar-link">speaker</a></li></ul><h2 class="collapsed" tabindex="0">Generic Peripherals</h2><ul><li><a href="../generic_peripheral/energy_storage.html" class="sidebar-link">energy_storage</a></li><li><a href="../generic_peripheral/fluid_storage.html" class="sidebar-link">fluid_storage</a></li><li><a href="../generic_peripheral/inventory.html" class="sidebar-link">inventory</a></li></ul><h2 tabindex="0">Events</h2><ul><li><a href="alarm.html" class="sidebar-link">alarm</a></li><li><a href="char.html" class="sidebar-link">char</a></li><li><a href="computer_command.html" class="sidebar-link">computer_command</a></li><li><a href="disk.html" class="sidebar-link">disk</a></li><li><a href="disk_eject.html" class="sidebar-link">disk_eject</a></li><li><strong class="sidebar-link selected">file_transfer</strong></li><li><a href="http_check.html" class="sidebar-link">http_check</a></li><li><a href="http_failure.html" class="sidebar-link">http_failure</a></li><li><a href="http_success.html" class="sidebar-link">http_success</a></li><li><a href="key.html" class="sidebar-link">key</a></li><li><a href="key_up.html" class="sidebar-link">key_up</a></li><li><a href="modem_message.html" class="sidebar-link">modem_message</a></li><li><a href="monitor_resize.html" class="sidebar-link">monitor_resize</a></li><li><a href="monitor_touch.html" class="sidebar-link">monitor_touch</a></li><li><a href="mouse_click.html" class="sidebar-link">mouse_click</a></li><li><a href="mouse_drag.html" class="sidebar-link">mouse_drag</a></li><li><a href="mouse_scroll.html" class="sidebar-link">mouse_scroll</a></li><li><a href="mouse_up.html" class="sidebar-link">mouse_up</a></li><li><a href="paste.html" class="sidebar-link">paste</a></li><li><a href="peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="peripheral_detach.html" class="sidebar-link">peripheral_detach</a></li><li><a href="rednet_message.html" class="sidebar-link">rednet_message</a></li><li><a href="redstone.html" class="sidebar-link">redstone</a></li><li><a href="speaker_audio_empty.html" class="sidebar-link">speaker_audio_empty</a></li><li><a href="task_complete.html" class="sidebar-link">task_complete</a></li><li><a href="term_resize.html" class="sidebar-link">term_resize</a></li><li><a href="terminate.html" class="sidebar-link">terminate</a></li><li><a href="timer.html" class="sidebar-link">timer</a></li><li><a href="turtle_inventory.html" class="sidebar-link">turtle_inventory</a></li><li><a href="websocket_closed.html" class="sidebar-link">websocket_closed</a></li><li><a href="websocket_failure.html" class="sidebar-link">websocket_failure</a></li><li><a href="websocket_message.html" class="sidebar-link">websocket_message</a></li><li><a href="websocket_success.html" class="sidebar-link">websocket_success</a></li></ul><h2 class="collapsed" tabindex="0">Guides</h2><ul><li><a href="../guide/gps_setup.html" class="sidebar-link">Setting up GPS</a></li><li><a href="../guide/local_ips.html" class="sidebar-link">Allowing access to local IPs</a></li><li><a href="../guide/speaker_audio.html" class="sidebar-link">Playing audio with speakers</a></li><li><a href="../guide/using_require.html" class="sidebar-link">Reusing code with require</a></li></ul><h2 class="collapsed" tabindex="0">Reference</h2><ul><li><a href="../reference/breaking_changes.html" class="sidebar-link">Incompatibilities between versions</a></li><li><a href="../reference/computercraft_command.html" class="sidebar-link">The /computercraft command</a></li><li><a href="../reference/feature_compat.html" class="sidebar-link">Lua 5.2/5.3 features in CC: Tweaked</a></li></ul></div></nav><div id="main"><div id="search-form" role="form"><input id="search-box" type="text" placeholder="Search..." autocomplete="off" tabindex="0"/><div id="search-results"></div></div><section id="content"><h1>file_transfer</h1><p>The <a href="file_transfer.html" class="reference"><code>file_transfer</code></a> event is queued when a user drags-and-drops a file on an open computer.</p>
<p>This event contains a single argument of type <a href="file_transfer.html#ty:TransferredFiles" class="reference"><code>TransferredFiles</code></a>, which can be used to <a href="file_transfer.html#ty:TransferredFiles:getFiles" class="reference">get the files to be
transferred</a>. Each file returned is a <a href="../module/fs.html#ty:ReadHandle" class="reference">binary file handle</a> with an
additional <a href="file_transfer.html#ty:TransferredFile:getName" class="reference">getName</a> method.</p>
<h2>Return values</h2>
<ol>
<li><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>: The event name</li>
<li><a href="file_transfer.html#ty:TransferredFiles" class="reference"><code>TransferredFiles</code></a>: The list of transferred files.</li>
</ol>
<h2>Example</h2>
<p>Waits for a user to drop files on top of the computer, then prints the list of files and the size of each file.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt"><span class="keyword">local</span> <span class="ident">_</span><span class="symbol">,</span> <span class="ident">files</span> <span class="symbol">=</span> <a title="Pause execution of the current thread and waits for any events matching filter." href="../module/os.html#v:pullEvent"><span class="ident">os</span><span class="symbol">.</span><span class="symbol">pullEvent</span></a><span class="symbol">(</span><span class="string">&quot;file_transfer&quot;</span><span class="symbol">)</span>
<span class="keyword">for</span> <span class="ident">_</span><span class="symbol">,</span> <span class="ident">file</span> <span class="keyword">in</span> <span class="ident">ipairs</span><span class="symbol">(</span><span class="ident">files</span><span class="symbol">.</span><span class="symbol">getFiles</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span> <span class="keyword">do</span>
  <span class="comment">-- Seek to the end of the file to get its size, then go back to the beginning.</span>
  <span class="keyword">local</span> <span class="ident">size</span> <span class="symbol">=</span> <span class="ident">file</span><span class="symbol">.</span><span class="symbol">seek</span><span class="symbol">(</span><span class="string">&quot;end&quot;</span><span class="symbol">)</span>
  <span class="ident">file</span><span class="symbol">.</span><span class="symbol">seek</span><span class="symbol">(</span><span class="string">&quot;set&quot;</span><span class="symbol">,</span> <span class="number">0</span><span class="symbol">)</span>

  <span class="ident">print</span><span class="symbol">(</span><span class="ident">file</span><span class="symbol">.</span><span class="symbol">getName</span><span class="symbol">(</span><span class="symbol">)</span> <span class="symbol">..</span> <span class="string">&quot; &quot;</span> <span class="symbol">..</span> <span class="ident">size</span><span class="symbol">)</span>
<span class="keyword">end</span><span class="symbol"></span></pre></div><h2>Example</h2>
<p>Save each transferred file to the computer's storage.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt"><span class="keyword">local</span> <span class="ident">_</span><span class="symbol">,</span> <span class="ident">files</span> <span class="symbol">=</span> <a title="Pause execution of the current thread and waits for any events matching filter." href="../module/os.html#v:pullEvent"><span class="ident">os</span><span class="symbol">.</span><span class="symbol">pullEvent</span></a><span class="symbol">(</span><span class="string">&quot;file_transfer&quot;</span><span class="symbol">)</span>
<span class="keyword">for</span> <span class="ident">_</span><span class="symbol">,</span> <span class="ident">file</span> <span class="keyword">in</span> <span class="ident">ipairs</span><span class="symbol">(</span><span class="ident">files</span><span class="symbol">.</span><span class="symbol">getFiles</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span> <span class="keyword">do</span>
  <span class="keyword">local</span> <span class="ident">handle</span> <span class="symbol">=</span> <a title="Opens a file for reading or writing at a path." href="../module/fs.html#v:open"><span class="ident">fs</span><span class="symbol">.</span><span class="symbol">open</span></a><span class="symbol">(</span><span class="ident">file</span><span class="symbol">.</span><span class="symbol">getName</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">,</span> <span class="string">&quot;wb&quot;</span><span class="symbol">)</span>
  <span class="ident">handle</span><span class="symbol">.</span><span class="symbol">write</span><span class="symbol">(</span><span class="ident">file</span><span class="symbol">.</span><span class="symbol">readAll</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span>

  <span class="ident">handle</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span>
  <span class="ident">file</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span>
<span class="keyword">end</span><span class="symbol"></span></pre></div><h3>Changes</h3><ul><li><strong>New in version 1.101.0</strong> </li></ul><h3>Types</h3><h3><a name="ty:TransferredFiles" href="#ty:TransferredFiles"></a> <span>TransferredFiles</span></h3><p>A list of files that have been transferred to this computer.</p>
<dl class="definition"><dt><a name="ty:TransferredFiles:getFiles" href="#ty:TransferredFiles:getFiles"></a><span class="definition-name">TransferredFiles.getFiles()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/transfer/TransferredFiles.java#L40" class="source-link">Source</a></dt><dd><p>All the files that are being transferred to this computer.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type">{ <a href="file_transfer.html#ty:TransferredFile" class="reference"><code>file_transfer.TransferredFile</code></a>... }</span> The list of files.</li></ol></dd></dl><h3><a name="ty:TransferredFile" href="#ty:TransferredFile"></a> <span>TransferredFile</span></h3><p>A binary file handle that has been transferred to this computer.</p>
<p>This inherits all methods of <a href="../module/fs.html#ty:ReadHandle" class="reference">binary file handles</a>, meaning you can use the standard
<a href="../module/fs.html#ty:ReadHandle:read" class="reference">read functions</a> to access the contents of the file.</p>
<h3>See also</h3><ul><li><strong><a href="../module/fs.html#ty:ReadHandle" class="reference"><code>fs.ReadHandle</code></a></strong> </li></ul><dl class="definition"><dt><a name="ty:TransferredFile:getName" href="#ty:TransferredFile:getName"></a><span class="definition-name">TransferredFile.getName()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/transfer/TransferredFile.java#L38" class="source-link">Source</a></dt><dd><p>Get the name of this file being transferred.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The file's name.</li></ol></dd></dl></section><footer>Last updated on 2024-05-26</footer></div><div id="search-overlay"></div><script src="../main.js?v=f7e54cef" type="text/javascript" defer></script></body></html>