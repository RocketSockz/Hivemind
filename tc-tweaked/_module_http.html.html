<!doctype HTML> <html><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>http</title><meta property="og:title" content="http"/><meta property="og:type" content="website"/><meta name="description" content="Make HTTP requests, sending and receiving data to a remote web server."/><meta property="og:description" content="Make HTTP requests, sending and receiving data to a remote web server."/><meta property="og:image" content="https://tweaked.cc/pack-26318f36.png"/><meta property="og:site_name" content="CC: Tweaked"/><meta name="illuaminate:index" content="../index.json"/><link rel="stylesheet" href="../main.css?v=bbe7ccb7" type="text/css"/>

<meta name="theme-color" content="#c8d87c"/></head><body><nav id="nav"><button id="nav-reveal" type="button">â˜°</button><h1><a href=".././"><img src="../pack-26318f36.png" alt="CC: Tweaked"/></a></h1><div class="nav-links"><h2 tabindex="0">Contents</h2><ul><li><a href="#v:get" class="sidebar-link">get</a></li><li><a href="#v:post" class="sidebar-link">post</a></li><li><a href="#v:request" class="sidebar-link">request</a></li><li><a href="#v:checkURLAsync" class="sidebar-link">checkURLAsync</a></li><li><a href="#v:checkURL" class="sidebar-link">checkURL</a></li><li><a href="#v:websocketAsync" class="sidebar-link">websocketAsync</a></li><li><a href="#v:websocket" class="sidebar-link">websocket</a></li></ul><h2 tabindex="0">Types</h2><ul><li><a href="#ty:Response" class="sidebar-link">Response</a></li><li><a href="#ty:Websocket" class="sidebar-link">Websocket</a></li></ul><h2 tabindex="0">Globals</h2><ul><li><a href="_G.html" class="sidebar-link">_G</a></li><li><a href="colors.html" class="sidebar-link">colors</a></li><li><a href="colours.html" class="sidebar-link">colours</a></li><li><a href="commands.html" class="sidebar-link">commands</a></li><li><a href="disk.html" class="sidebar-link">disk</a></li><li><a href="fs.html" class="sidebar-link">fs</a></li><li><a href="gps.html" class="sidebar-link">gps</a></li><li><a href="help.html" class="sidebar-link">help</a></li><li><strong class="sidebar-link selected">http</strong></li><li><a href="io.html" class="sidebar-link">io</a></li><li><a href="keys.html" class="sidebar-link">keys</a></li><li><a href="multishell.html" class="sidebar-link">multishell</a></li><li><a href="os.html" class="sidebar-link">os</a></li><li><a href="paintutils.html" class="sidebar-link">paintutils</a></li><li><a href="parallel.html" class="sidebar-link">parallel</a></li><li><a href="peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="pocket.html" class="sidebar-link">pocket</a></li><li><a href="rednet.html" class="sidebar-link">rednet</a></li><li><a href="redstone.html" class="sidebar-link">redstone</a></li><li><a href="settings.html" class="sidebar-link">settings</a></li><li><a href="shell.html" class="sidebar-link">shell</a></li><li><a href="term.html" class="sidebar-link">term</a></li><li><a href="textutils.html" class="sidebar-link">textutils</a></li><li><a href="turtle.html" class="sidebar-link">turtle</a></li><li><a href="vector.html" class="sidebar-link">vector</a></li><li><a href="window.html" class="sidebar-link">window</a></li></ul><h2 class="collapsed" tabindex="0">Modules</h2><ul><li><a href="../library/cc.audio.dfpwm.html" class="sidebar-link">cc.audio.dfpwm</a></li><li><a href="../library/cc.completion.html" class="sidebar-link">cc.completion</a></li><li><a href="../library/cc.expect.html" class="sidebar-link">cc.expect</a></li><li><a href="../library/cc.image.nft.html" class="sidebar-link">cc.image.nft</a></li><li><a href="../library/cc.pretty.html" class="sidebar-link">cc.pretty</a></li><li><a href="../library/cc.require.html" class="sidebar-link">cc.require</a></li><li><a href="../library/cc.shell.completion.html" class="sidebar-link">cc.shell.completion</a></li><li><a href="../library/cc.strings.html" class="sidebar-link">cc.strings</a></li></ul><h2 class="collapsed" tabindex="0">Peripherals</h2><ul><li><a href="../peripheral/command.html" class="sidebar-link">command</a></li><li><a href="../peripheral/computer.html" class="sidebar-link">computer</a></li><li><a href="../peripheral/drive.html" class="sidebar-link">drive</a></li><li><a href="../peripheral/modem.html" class="sidebar-link">modem</a></li><li><a href="../peripheral/monitor.html" class="sidebar-link">monitor</a></li><li><a href="../peripheral/printer.html" class="sidebar-link">printer</a></li><li><a href="../peripheral/speaker.html" class="sidebar-link">speaker</a></li></ul><h2 class="collapsed" tabindex="0">Generic Peripherals</h2><ul><li><a href="../generic_peripheral/energy_storage.html" class="sidebar-link">energy_storage</a></li><li><a href="../generic_peripheral/fluid_storage.html" class="sidebar-link">fluid_storage</a></li><li><a href="../generic_peripheral/inventory.html" class="sidebar-link">inventory</a></li></ul><h2 class="collapsed" tabindex="0">Events</h2><ul><li><a href="../event/alarm.html" class="sidebar-link">alarm</a></li><li><a href="../event/char.html" class="sidebar-link">char</a></li><li><a href="../event/computer_command.html" class="sidebar-link">computer_command</a></li><li><a href="../event/disk.html" class="sidebar-link">disk</a></li><li><a href="../event/disk_eject.html" class="sidebar-link">disk_eject</a></li><li><a href="../event/file_transfer.html" class="sidebar-link">file_transfer</a></li><li><a href="../event/http_check.html" class="sidebar-link">http_check</a></li><li><a href="../event/http_failure.html" class="sidebar-link">http_failure</a></li><li><a href="../event/http_success.html" class="sidebar-link">http_success</a></li><li><a href="../event/key.html" class="sidebar-link">key</a></li><li><a href="../event/key_up.html" class="sidebar-link">key_up</a></li><li><a href="../event/modem_message.html" class="sidebar-link">modem_message</a></li><li><a href="../event/monitor_resize.html" class="sidebar-link">monitor_resize</a></li><li><a href="../event/monitor_touch.html" class="sidebar-link">monitor_touch</a></li><li><a href="../event/mouse_click.html" class="sidebar-link">mouse_click</a></li><li><a href="../event/mouse_drag.html" class="sidebar-link">mouse_drag</a></li><li><a href="../event/mouse_scroll.html" class="sidebar-link">mouse_scroll</a></li><li><a href="../event/mouse_up.html" class="sidebar-link">mouse_up</a></li><li><a href="../event/paste.html" class="sidebar-link">paste</a></li><li><a href="../event/peripheral.html" class="sidebar-link">peripheral</a></li><li><a href="../event/peripheral_detach.html" class="sidebar-link">peripheral_detach</a></li><li><a href="../event/rednet_message.html" class="sidebar-link">rednet_message</a></li><li><a href="../event/redstone.html" class="sidebar-link">redstone</a></li><li><a href="../event/speaker_audio_empty.html" class="sidebar-link">speaker_audio_empty</a></li><li><a href="../event/task_complete.html" class="sidebar-link">task_complete</a></li><li><a href="../event/term_resize.html" class="sidebar-link">term_resize</a></li><li><a href="../event/terminate.html" class="sidebar-link">terminate</a></li><li><a href="../event/timer.html" class="sidebar-link">timer</a></li><li><a href="../event/turtle_inventory.html" class="sidebar-link">turtle_inventory</a></li><li><a href="../event/websocket_closed.html" class="sidebar-link">websocket_closed</a></li><li><a href="../event/websocket_failure.html" class="sidebar-link">websocket_failure</a></li><li><a href="../event/websocket_message.html" class="sidebar-link">websocket_message</a></li><li><a href="../event/websocket_success.html" class="sidebar-link">websocket_success</a></li></ul><h2 class="collapsed" tabindex="0">Guides</h2><ul><li><a href="../guide/gps_setup.html" class="sidebar-link">Setting up GPS</a></li><li><a href="../guide/local_ips.html" class="sidebar-link">Allowing access to local IPs</a></li><li><a href="../guide/speaker_audio.html" class="sidebar-link">Playing audio with speakers</a></li><li><a href="../guide/using_require.html" class="sidebar-link">Reusing code with require</a></li></ul><h2 class="collapsed" tabindex="0">Reference</h2><ul><li><a href="../reference/breaking_changes.html" class="sidebar-link">Incompatibilities between versions</a></li><li><a href="../reference/computercraft_command.html" class="sidebar-link">The /computercraft command</a></li><li><a href="../reference/feature_compat.html" class="sidebar-link">Lua 5.2/5.3 features in CC: Tweaked</a></li></ul></div></nav><div id="main"><div id="search-form" role="form"><input id="search-box" type="text" placeholder="Search..." autocomplete="off" tabindex="0"/><div id="search-results"></div></div><section id="content"><h1>http</h1><p>Make HTTP requests, sending and receiving data to a remote web server.</p>
<h3>See also</h3><ul><li><strong><a href="../guide/local_ips.html" class="reference"><code>Allowing access to local IPs</code></a></strong> To allow accessing servers running on your local network.</li></ul><h3>Changes</h3><ul><li><strong>New in version 1.1</strong> </li></ul><table class="definition-list"><tbody><tr><th class="definition-name"><a href="#v:get">get(...)</a></th><td>Make a HTTP GET request to the given url.</td></tr><tr><th class="definition-name"><a href="#v:post">post(...)</a></th><td>Make a HTTP POST request to the given url.</td></tr><tr><th class="definition-name"><a href="#v:request">request(...)</a></th><td>Asynchronously make a HTTP request to the given url.</td></tr><tr><th class="definition-name"><a href="#v:checkURLAsync">checkURLAsync(url)</a></th><td>Asynchronously determine whether a URL can be requested.</td></tr><tr><th class="definition-name"><a href="#v:checkURL">checkURL(url)</a></th><td>Determine whether a URL can be requested.</td></tr><tr><th class="definition-name"><a href="#v:websocketAsync">websocketAsync(...)</a></th><td>Asynchronously open a websocket.</td></tr><tr><th class="definition-name"><a href="#v:websocket">websocket(...)</a></th><td>Open a websocket.</td></tr></tbody></table><dl class="definition"><dt><a name="v:get" href="#v:get"></a><span class="definition-name">get(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L104" class="source-link">Source</a></dt><dd><p>Make a HTTP GET request to the given url.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The url to request</li><li><span class="parameter">headers<span class="optional" title="This argument is optional">?</span></span> <span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> Additional headers to send as part
of this request.</li><li><span class="parameter">binary<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span><span class="default-value"> = <code class="language language-lua"><span class="literal-kw">false</span><span class="symbol"></span></code></span> Whether the <a href="fs.html#ty:ReadHandle" class="reference">response handle</a>
should be opened in binary mode.</li></ol><h4>Or</h4><ol class="parameter-list"><li><span class="parameter">request</span> <span class="type">{ url = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, headers<span class="optional" title="This field is optional">?</span> = { [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }, binary<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>boolean</code></span>, method<span class="optional" title="This field is optional">?</span> = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, redirect<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>boolean</code></span>, timeout<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>number</code></span> }</span> Options for the request. See <a href="http.html#v:request" class="reference"><code>http.request</code></a> for details on how
these options behave.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="http.html#ty:Response" class="reference"><code>Response</code></a></span> The resulting http response, which can be read from.</li></ol><h4>Or</h4><ol class="return-list"><li><span class="type">nil</span> When the http request failed, such as in the event of a 404
error or connection timeout.</li><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> A message detailing why the request failed.</li><li><span class="type"><a href="http.html#ty:Response" class="reference"><code>Response</code></a> | nil</span> The failing http response, if available.</li></ol><h3>Usage</h3><ul><li><p>Make a request to <a href="https://example.tweaked.cc">example.tweaked.cc</a>,
and print the returned page.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt"><span class="keyword">local</span> <span class="ident">request</span> <span class="symbol">=</span> <a title="Make a HTTP GET request to the given url." href="http.html#v:get"><span class="ident">http</span><span class="symbol">.</span><span class="symbol">get</span></a><span class="symbol">(</span><span class="string">&quot;https://example.tweaked.cc&quot;</span><span class="symbol">)</span>
<span class="ident">print</span><span class="symbol">(</span><span class="ident">request</span><span class="symbol">.</span><span class="symbol">readAll</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="comment">-- => HTTP is working!</span>
<span class="ident">request</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol"></span></pre></div></li></ul><h3>Changes</h3><ul><li><strong>Changed in version 1.63:</strong> Added argument for headers.</li><li><strong>Changed in version 1.80pr1:</strong> Response handles are now returned on error if available.</li><li><strong>Changed in version 1.80pr1:</strong> Added argument for binary handles.</li><li><strong>Changed in version 1.80pr1.6:</strong> Added support for table argument.</li><li><strong>Changed in version 1.86.0:</strong> Added PATCH and TRACE methods.</li><li><strong>Changed in version 1.105.0:</strong> Added support for custom timeouts.</li><li><strong>Changed in version 1.109.0:</strong> The returned response now reads the body as raw bytes, rather
than decoding from UTF-8.</li></ul></dd><dt><a name="v:post" href="#v:post"></a><span class="definition-name">post(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L148" class="source-link">Source</a></dt><dd><p>Make a HTTP POST request to the given url.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The url to request</li><li><span class="parameter">body</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The body of the POST request.</li><li><span class="parameter">headers<span class="optional" title="This argument is optional">?</span></span> <span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> Additional headers to send as part
of this request.</li><li><span class="parameter">binary<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span><span class="default-value"> = <code class="language language-lua"><span class="literal-kw">false</span><span class="symbol"></span></code></span> Whether the <a href="fs.html#ty:ReadHandle" class="reference">response handle</a>
should be opened in binary mode.</li></ol><h4>Or</h4><ol class="parameter-list"><li><span class="parameter">request</span> <span class="type">{ url = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, body<span class="optional" title="This field is optional">?</span> = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, headers<span class="optional" title="This field is optional">?</span> = { [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }, binary<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>boolean</code></span>, method<span class="optional" title="This field is optional">?</span> = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, redirect<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>boolean</code></span>, timeout<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>number</code></span> }</span> Options for the request. See <a href="http.html#v:request" class="reference"><code>http.request</code></a> for details on how
these options behave.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="http.html#ty:Response" class="reference"><code>Response</code></a></span> The resulting http response, which can be read from.</li></ol><h4>Or</h4><ol class="return-list"><li><span class="type">nil</span> When the http request failed, such as in the event of a 404
error or connection timeout.</li><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> A message detailing why the request failed.</li><li><span class="type"><a href="http.html#ty:Response" class="reference"><code>Response</code></a> | nil</span> The failing http response, if available.</li></ol><h3>Changes</h3><ul><li><strong>New in version 1.31</strong> </li><li><strong>Changed in version 1.63:</strong> Added argument for headers.</li><li><strong>Changed in version 1.80pr1:</strong> Response handles are now returned on error if available.</li><li><strong>Changed in version 1.80pr1:</strong> Added argument for binary handles.</li><li><strong>Changed in version 1.80pr1.6:</strong> Added support for table argument.</li><li><strong>Changed in version 1.86.0:</strong> Added PATCH and TRACE methods.</li><li><strong>Changed in version 1.105.0:</strong> Added support for custom timeouts.</li><li><strong>Changed in version 1.109.0:</strong> The returned response now reads the body as raw bytes, rather
than decoding from UTF-8.</li></ul></dd><dt><a name="v:request" href="#v:request"></a><span class="definition-name">request(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L201" class="source-link">Source</a></dt><dd><p>Asynchronously make a HTTP request to the given url.</p>
<p>This returns immediately, a <a href="../event/http_success.html" class="reference"><code>http_success</code></a> or <a href="../event/http_failure.html" class="reference"><code>http_failure</code></a> will be queued
once the request has completed.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The url to request</li><li><span class="parameter">body<span class="optional" title="This argument is optional">?</span></span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> An optional string containing the body of the
request. If specified, a <code>POST</code> request will be made instead.</li><li><span class="parameter">headers<span class="optional" title="This argument is optional">?</span></span> <span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> Additional headers to send as part
of this request.</li><li><span class="parameter">binary<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span><span class="default-value"> = <code class="language language-lua"><span class="literal-kw">false</span><span class="symbol"></span></code></span> Whether the <a href="fs.html#ty:ReadHandle" class="reference">response handle</a>
should be opened in binary mode.</li></ol><h4>Or</h4><ol class="parameter-list"><li><span class="parameter">request</span> <span class="type">{ url = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, body<span class="optional" title="This field is optional">?</span> = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, headers<span class="optional" title="This field is optional">?</span> = { [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }, binary<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>boolean</code></span>, method<span class="optional" title="This field is optional">?</span> = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, redirect<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>boolean</code></span>, timeout<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>number</code></span> }</span> <p>Options for the request.</p>
<p>This table form is an expanded version of the previous syntax. All arguments
from above are passed in as fields instead (for instance,
<code>http.request(&quot;https://example.com&quot;)</code> becomes <code>http.request { url = &quot;https://example.com&quot; }</code>).
This table also accepts several additional options:</p>
<ul>
<li><code>method</code>: Which HTTP method to use, for instance <code>&quot;PATCH&quot;</code> or <code>&quot;DELETE&quot;</code>.</li>
<li><code>redirect</code>: Whether to follow HTTP redirects. Defaults to true.</li>
<li><code>timeout</code>: The connection timeout, in seconds.</li>
</ul>
</li></ol><h3>See also</h3><ul><li><strong><a href="http.html#v:get" class="reference"><code>http.get</code></a></strong> For a synchronous way to make GET requests.</li><li><strong><a href="http.html#v:post" class="reference"><code>http.post</code></a></strong> For a synchronous way to make POST requests.</li></ul><h3>Changes</h3><ul><li><strong>Changed in version 1.63:</strong> Added argument for headers.</li><li><strong>Changed in version 1.80pr1:</strong> Added argument for binary handles.</li><li><strong>Changed in version 1.80pr1.6:</strong> Added support for table argument.</li><li><strong>Changed in version 1.86.0:</strong> Added PATCH and TRACE methods.</li><li><strong>Changed in version 1.105.0:</strong> Added support for custom timeouts.</li><li><strong>Changed in version 1.109.0:</strong> The returned response now reads the body as raw bytes, rather
than decoding from UTF-8.</li></ul></dd><dt><a name="v:checkURLAsync" href="#v:checkURLAsync"></a><span class="definition-name">checkURLAsync(url)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L223" class="source-link">Source</a></dt><dd><p>Asynchronously determine whether a URL can be requested.</p>
<p>If this returns <code>true</code>, one should also listen for <a href="../event/http_check.html" class="reference"><code>http_check</code></a> which will
container further information about whether the URL is allowed or not.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The URL to check.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type">true</span> When this url is not invalid. This does not imply that it is
allowed - see the comment above.</li></ol><h4>Or</h4><ol class="return-list"><li><span class="type">false</span> When this url is invalid.</li><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> A reason why this URL is not valid (for instance, if it is
malformed, or blocked).</li></ol><h3>See also</h3><ul><li><strong><a href="http.html#v:checkURL" class="reference"><code>http.checkURL</code></a></strong> For a synchronous version.</li></ul></dd><dt><a name="v:checkURL" href="#v:checkURL"></a><span class="definition-name">checkURL(url)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L264" class="source-link">Source</a></dt><dd><p>Determine whether a URL can be requested.</p>
<p>If this returns <code>true</code>, one should also listen for <a href="../event/http_check.html" class="reference"><code>http_check</code></a> which will
container further information about whether the URL is allowed or not.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The URL to check.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type">true</span> When this url is valid and can be requested via <a href="http.html#v:request" class="reference"><code>http.request</code></a>.</li></ol><h4>Or</h4><ol class="return-list"><li><span class="type">false</span> When this url is invalid.</li><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> A reason why this URL is not valid (for instance, if it is
malformed, or blocked).</li></ol><h3>Usage</h3><ul><li><div class="lua-example"><pre class="highlight" data-lua-kind="stmt"><span class="ident">print</span><span class="symbol">(</span><a title="Determine whether a URL can be requested." href="http.html#v:checkURL"><span class="ident">http</span><span class="symbol">.</span><span class="symbol">checkURL</span></a><span class="symbol">(</span><span class="string">&quot;https://example.tweaked.cc/&quot;</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="comment">-- => true</span>
<span class="ident">print</span><span class="symbol">(</span><a title="Determine whether a URL can be requested." href="http.html#v:checkURL"><span class="ident">http</span><span class="symbol">.</span><span class="symbol">checkURL</span></a><span class="symbol">(</span><span class="string">&quot;http://localhost/&quot;</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="comment">-- => false Domain not permitted</span>
<span class="ident">print</span><span class="symbol">(</span><a title="Determine whether a URL can be requested." href="http.html#v:checkURL"><span class="ident">http</span><span class="symbol">.</span><span class="symbol">checkURL</span></a><span class="symbol">(</span><span class="string">&quot;not a url&quot;</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="comment">-- => false URL malformed</span><span class="symbol"></span></pre></div></li></ul><h3>See also</h3><ul><li><strong><a href="http.html#v:checkURLAsync" class="reference"><code>http.checkURLAsync</code></a></strong> For an asynchronous version.</li></ul></dd><dt><a name="v:websocketAsync" href="#v:websocketAsync"></a><span class="definition-name">websocketAsync(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L307" class="source-link">Source</a></dt><dd><p>Asynchronously open a websocket.</p>
<p>This returns immediately, a <a href="../event/websocket_success.html" class="reference"><code>websocket_success</code></a> or <a href="../event/websocket_failure.html" class="reference"><code>websocket_failure</code></a>
will be queued once the request has completed.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The websocket url to connect to. This should have the
<code>ws://</code> or <code>wss://</code> protocol.</li><li><span class="parameter">headers<span class="optional" title="This argument is optional">?</span></span> <span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> Additional headers to send as part
of the initial websocket connection.</li></ol><h4>Or</h4><ol class="parameter-list"><li><span class="parameter">request</span> <span class="type">{ url = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, headers<span class="optional" title="This field is optional">?</span> = { [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }, timeout<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>number</code></span> }</span> Options for the websocket.  See <a href="http.html#v:websocket" class="reference"><code>http.websocket</code></a> for details on how
these options behave.</li></ol><h3>See also</h3><ul><li><strong><a href="../event/websocket_success.html" class="reference"><code>websocket_success</code></a></strong> </li><li><strong><a href="../event/websocket_failure.html" class="reference"><code>websocket_failure</code></a></strong> </li></ul><h3>Changes</h3><ul><li><strong>New in version 1.80pr1.3</strong> </li><li><strong>Changed in version 1.95.3:</strong> Added User-Agent to default headers.</li><li><strong>Changed in version 1.105.0:</strong> Added support for table argument and custom timeout.</li><li><strong>Changed in version 1.109.0:</strong> Non-binary websocket messages now use the raw bytes rather than
using UTF-8.</li></ul></dd><dt><a name="v:websocket" href="#v:websocket"></a><span class="definition-name">websocket(...)</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/resources/data/computercraft/lua/rom/apis/http/http.lua#L365" class="source-link">Source</a></dt><dd><p>Open a websocket.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">url</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The websocket url to connect to. This should have the
<code>ws://</code> or <code>wss://</code> protocol.</li><li><span class="parameter">headers<span class="optional" title="This argument is optional">?</span></span> <span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> Additional headers to send as part
of the initial websocket connection.</li></ol><h4>Or</h4><ol class="parameter-list"><li><span class="parameter">request</span> <span class="type">{ url = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>, headers<span class="optional" title="This field is optional">?</span> = { [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }, timeout<span class="optional" title="This field is optional">?</span> = <span class="reference reference-unresolved"><code>number</code></span> }</span> <p>Options for the websocket.</p>
<p>This table form is an expanded version of the previous syntax. All arguments
from above are passed in as fields instead (for instance,
<code>http.websocket(&quot;https://example.com&quot;)</code> becomes <code>http.websocket { url = &quot;https://example.com&quot; }</code>).
This table also accepts the following additional options:</p>
<ul>
<li><code>timeout</code>: The connection timeout, in seconds.</li>
</ul>
</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="http.html#ty:Websocket" class="reference"><code>Websocket</code></a></span> The websocket connection.</li></ol><h4>Or</h4><ol class="return-list"><li><span class="type">false</span> If the websocket connection failed.</li><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> An error message describing why the connection failed.</li></ol><h3>Usage</h3><ul><li><p>Connect to an echo websocket and send a message.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt"><span class="keyword">local</span> <span class="ident">ws</span> <span class="symbol">=</span> <span class="ident">assert</span><span class="symbol">(</span><a title="Open a websocket." href="http.html#v:websocket"><span class="ident">http</span><span class="symbol">.</span><span class="symbol">websocket</span></a><span class="symbol">(</span><span class="string">&quot;wss://example.tweaked.cc/echo&quot;</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="ident">ws</span><span class="symbol">.</span><span class="symbol">send</span><span class="symbol">(</span><span class="string">&quot;Hello!&quot;</span><span class="symbol">)</span> <span class="comment">-- Send a message</span>
<span class="ident">print</span><span class="symbol">(</span><span class="ident">ws</span><span class="symbol">.</span><span class="symbol">receive</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span> <span class="comment">-- And receive the reply</span>
<span class="ident">ws</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol"></span></pre></div></li></ul><h3>Changes</h3><ul><li><strong>New in version 1.80pr1.1</strong> </li><li><strong>Changed in version 1.80pr1.3:</strong> No longer asynchronous.</li><li><strong>Changed in version 1.95.3:</strong> Added User-Agent to default headers.</li><li><strong>Changed in version 1.105.0:</strong> Added support for table argument and custom timeout.</li><li><strong>Changed in version 1.109.0:</strong> Non-binary websocket messages now use the raw bytes rather than
using UTF-8.</li></ul></dd></dl><h3>Types</h3><h3><a name="ty:Response" href="#ty:Response"></a> <span>Response</span></h3><p>A http response. This provides the same methods as a <a href="fs.html#ty:ReadHandle" class="reference">file</a>, though provides several request
specific methods.</p>
<h3>See also</h3><ul><li><strong><a href="http.html#v:request" class="reference"><code>http.request</code></a></strong> On how to make a http request.</li></ul><dl class="definition"><dt><a name="ty:Response:getResponseCode" href="#ty:Response:getResponseCode"></a><span class="definition-name">Response.getResponseCode()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/http/request/HttpResponseHandle.java#L45" class="source-link">Source</a></dt><dd><p>Returns the response code and response message returned by the server.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The response code (i.e. 200)</li><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The response message (i.e. &quot;OK&quot;)</li></ol><h3>Changes</h3><ul><li><strong>Changed in version 1.80pr1.13:</strong> Added response message return value.</li></ul></dd><dt><a name="ty:Response:getResponseHeaders" href="#ty:Response:getResponseHeaders"></a><span class="definition-name">Response.getResponseHeaders()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/http/request/HttpResponseHandle.java#L68" class="source-link">Source</a></dt><dd><p>Get a table containing the response's headers, in a format similar to that required by <a href="http.html#v:request" class="reference"><code>http.request</code></a>.
If multiple headers are sent with the same name, they will be combined with a comma.</p>
<h3>Returns</h3><ol class="return-list"><li><span class="type">{ [<a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a>] = <a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a> }</span> The response's headers.</li></ol><h3>Usage</h3><ul><li><p>Make a request to <a href="https://example.tweaked.cc">example.tweaked.cc</a>, and print the
returned headers.</p>
<div class="lua-example"><pre class="highlight" data-lua-kind="stmt"><span class="keyword">local</span> <span class="ident">request</span> <span class="symbol">=</span> <a title="Make a HTTP GET request to the given url." href="http.html#v:get"><span class="ident">http</span><span class="symbol">.</span><span class="symbol">get</span></a><span class="symbol">(</span><span class="string">&quot;https://example.tweaked.cc&quot;</span><span class="symbol">)</span>
<span class="ident">print</span><span class="symbol">(</span><a title="Convert a Lua object into a textual representation, suitable for saving in a file or pretty-printing." href="textutils.html#v:serialize"><span class="ident">textutils</span><span class="symbol">.</span><span class="symbol">serialize</span></a><span class="symbol">(</span><span class="ident">request</span><span class="symbol">.</span><span class="symbol">getResponseHeaders</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span><span class="symbol">)</span>
<span class="comment">-- => {</span>
<span class="comment">--  [ &quot;Content-Type&quot; ] = &quot;text/plain; charset=utf8&quot;,</span>
<span class="comment">--  [ &quot;content-length&quot; ] = 17,</span>
<span class="comment">--  ...</span>
<span class="comment">-- }</span>
<span class="ident">request</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol"></span></pre></div></li></ul></dd></dl><h3><a name="ty:Websocket" href="#ty:Websocket"></a> <span>Websocket</span></h3><p>A websocket, which can be used to send and receive messages with a web server.</p>
<h3>See also</h3><ul><li><strong><a href="http.html#v:websocket" class="reference"><code>http.websocket</code></a></strong> On how to open a websocket.</li></ul><dl class="definition"><dt><a name="ty:Websocket:receive" href="#ty:Websocket:receive"></a><span class="definition-name">Websocket.receive([timeout])</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/http/websocket/WebsocketHandle.java#L58" class="source-link">Source</a></dt><dd><p>Wait for a message from the server.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">timeout<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>number</code></span></span> The number of seconds to wait if no message is received.</li></ol><h3>Returns</h3><ol class="return-list"><li><span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The received message.</li><li><span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> If this was a binary message.</li></ol><h4>Or</h4><ol class="return-list"><li><span class="type">nil</span> If the websocket was closed while waiting, or if we timed out.</li></ol><h3>Throws</h3><ul><li><p>If the websocket has been closed.</p>
</li></ul><h3>Changes</h3><ul><li><strong>Changed in version 1.80pr1.13:</strong> Added return value indicating whether the message was binary.</li><li><strong>Changed in version 1.87.0:</strong> Added timeout argument.</li></ul></dd><dt><a name="ty:Websocket:send" href="#ty:Websocket:send"></a><span class="definition-name">Websocket.send(message [, binary])</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/http/websocket/WebsocketHandle.java#L77" class="source-link">Source</a></dt><dd><p>Send a websocket message to the connected server.</p>
<h3>Parameters</h3><ol class="parameter-list"><li><span class="parameter">message</span> <span class="type"><a href="https://www.lua.org/manual/5.1/manual.html#5.4" class="reference"><code>string</code></a></span> The message to send.</li><li><span class="parameter">binary<span class="optional" title="This argument is optional">?</span></span> <span class="type"><span class="reference reference-unresolved"><code>boolean</code></span></span> Whether this message should be treated as a</li></ol><h3>Throws</h3><ul><li><p>If the message is too large.</p>
</li><li><p>If the websocket has been closed.</p>
</li></ul><h3>Changes</h3><ul><li><strong>Changed in version 1.81.0:</strong> Added argument for binary mode.</li></ul></dd><dt><a name="ty:Websocket:close" href="#ty:Websocket:close"></a><span class="definition-name">Websocket.close()</span><a href="https://github.com/cc-tweaked/CC-Tweaked/blob/d48b85d50cdb30af941c0dc4eccbb8971e902011/projects/core/src/main/java/dan200/computercraft/core/apis/http/websocket/WebsocketHandle.java#L102" class="source-link">Source</a></dt><dd><p>Close this websocket. This will terminate the connection, meaning messages can no longer be sent or received
along it.</p>
</dd></dl></section><footer>Last updated on 2024-05-26</footer></div><div id="search-overlay"></div><script src="../main.js?v=f7e54cef" type="text/javascript" defer></script></body></html>